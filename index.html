<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threat Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .glass {
            background: rgba(17, 25, 40, 0.75);
            backdrop-filter: blur(16px) saturate(180%);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.125);
        }
        .neon-border {
            box-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
        }
        body {
            background: linear-gradient(45deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
        }
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-200">
    <div id="loading" class="loading">
        <div class="spinner"></div>
    </div>

    <div id="loginPage" class="min-h-screen flex items-center justify-center">
        <div class="glass p-8 w-96">
            <h2 class="text-2xl font-bold mb-6 text-center">Threat Dashboard Login</h2>
            <form id="loginForm" class="space-y-4">
                <div>
                    <input type="email" id="email" placeholder="Email" class="w-full p-2 rounded bg-gray-800 border border-gray-700">
                </div>
                <div>
                    <input type="password" id="password" placeholder="Password" class="w-full p-2 rounded bg-gray-800 border border-gray-700">
                </div>
                <button type="submit" class="w-full bg-green-500 hover:bg-green-600 p-2 rounded neon-border">Login</button>
            </form>
        </div>
    </div>

    <div id="dashboard" class="hidden p-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4">
                <h3>Critical Vulnerabilities</h3>
                <p class="text-3xl font-bold text-red-500" id="criticalCount">0</p>
            </div>
            <div class="glass p-4">
                <h3>High Vulnerabilities</h3>
                <p class="text-3xl font-bold text-orange-500" id="highCount">0</p>
            </div>
            <div class="glass p-4">
                <h3>Medium Vulnerabilities</h3>
                <p class="text-3xl font-bold text-yellow-500" id="mediumCount">0</p>
            </div>
            <div class="glass p-4">
                <h3>Low Vulnerabilities</h3>
                <p class="text-3xl font-bold text-green-500" id="lowCount">0</p>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="glass p-4">
                <canvas id="severityChart"></canvas>
            </div>
            <div class="glass p-4">
                <canvas id="trendChart"></canvas>
            </div>
            <div class="glass p-4">
                <h3 class="mb-4">AI Suggestions</h3>
                <div id="aiSuggestions" class="space-y-2">
                </div>
            </div>
        </div>

        <div class="glass p-4 mb-6">
            <div class="flex justify-between items-center mb-4">
                <div class="flex space-x-2">
                    <input type="text" id="search" placeholder="Search..." class="p-2 rounded bg-gray-800 border border-gray-700">
                    <select id="severityFilter" class="p-2 rounded bg-gray-800 border border-gray-700">
                        <option value="">All Severities</option>
                        <option value="Critical">Critical</option>
                        <option value="High">High</option>
                        <option value="Medium">Medium</option>
                        <option value="Low">Low</option>
                    </select>
                </div>
                <button id="simulateScan" class="bg-blue-500 hover:bg-blue-600 p-2 rounded neon-border">
                    Simulate Scan
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="text-left">
                            <th class="p-2">Name</th>
                            <th class="p-2">Severity</th>
                            <th class="p-2">CVSS Score</th>
                            <th class="p-2">Asset</th>
                            <th class="p-2">Status</th>
                            <th class="p-2">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="vulnerabilityTable">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let vulnerabilities = [];
        const mockVulnerabilities = [
            {id: 1, name: "SQL Injection", severity: "Critical", cvssScore: 9.8, asset: "Web Server", status: "Unresolved"},
            {id: 2, name: "XSS Vulnerability", severity: "High", cvssScore: 7.5, asset: "Web App", status: "Unresolved"},
            {id: 3, name: "Weak Password Policy", severity: "Medium", cvssScore: 5.0, asset: "Auth System", status: "Resolved"}
        ];

        const aiSuggestions = [
            "Critical: Patch CVE-2024-3400 immediately - SQL Injection vulnerability detected",
            "High: Update authentication modules on Web App server",
            "Medium: Review and update password policies"
        ];

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            initializeDashboard();
        });

        function showLoading() {
            document.getElementById('loading').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        function initializeDashboard() {
            vulnerabilities = [...mockVulnerabilities];
            updateDashboard();
            initializeCharts();
            updateAISuggestions();
        }

        function updateDashboard() {
            const counts = {
                Critical: 0,
                High: 0,
                Medium: 0,
                Low: 0
            };

            vulnerabilities.forEach(v => counts[v.severity]++);
            
            document.getElementById('criticalCount').textContent = counts.Critical;
            document.getElementById('highCount').textContent = counts.High;
            document.getElementById('mediumCount').textContent = counts.Medium;
            document.getElementById('lowCount').textContent = counts.Low;

            const tableBody = document.getElementById('vulnerabilityTable');
            tableBody.innerHTML = '';
            
            vulnerabilities.forEach(v => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="p-2">${v.name}</td>
                    <td class="p-2"><span class="px-2 py-1 rounded ${getSeverityClass(v.severity)}">${v.severity}</span></td>
                    <td class="p-2">${v.cvssScore}</td>
                    <td class="p-2">${v.asset}</td>
                    <td class="p-2">${v.status}</td>
                    <td class="p-2">
                        <button onclick="viewDetails(${v.id})" class="text-blue-400 hover:text-blue-300 mr-2">
                            <i class="bi bi-eye"></i>
                        </button>
                        <button onclick="takeAction(${v.id})" class="text-green-400 hover:text-green-300">
                            <i class="bi bi-check-circle"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function getSeverityClass(severity) {
            const classes = {
                Critical: 'bg-red-500',
                High: 'bg-orange-500',
                Medium: 'bg-yellow-500',
                Low: 'bg-green-500'
            };
            return classes[severity] || '';
        }

        function initializeCharts() {
            const severityCtx = document.getElementById('severityChart').getContext('2d');
            new Chart(severityCtx, {
                type: 'pie',
                data: {
                    labels: ['Critical', 'High', 'Medium', 'Low'],
                    datasets: [{
                        data: [1, 1, 1, 0],
                        backgroundColor: ['#ef4444', '#f97316', '#eab308', '#22c55e']
                    }]
                }
            });

            const trendCtx = document.getElementById('trendChart').getContext('2d');
            new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
                    datasets: [{
                        label: 'Vulnerabilities',
                        data: [4, 3, 5, 2, 3],
                        borderColor: '#22c55e'
                    }]
                }
            });
        }

        function updateAISuggestions() {
            const container = document.getElementById('aiSuggestions');
            container.innerHTML = '';
            aiSuggestions.forEach(suggestion => {
                const div = document.createElement('div');
                div.className = 'p-2 rounded bg-gray-800';
                div.textContent = suggestion;
                container.appendChild(div);
            });
        }

        document.getElementById('simulateScan').addEventListener('click', () => {
            showLoading();
            setTimeout(() => {
                const newVulnerability = {
                    id: vulnerabilities.length + 1,
                    name: `New Vulnerability ${Math.floor(Math.random() * 1000)}`,
                    severity: ['Critical', 'High', 'Medium', 'Low'][Math.floor(Math.random() * 4)],
                    cvssScore: (Math.random() * 10).toFixed(1),
                    asset: 'New Asset',
                    status: 'Unresolved'
                };
                vulnerabilities.push(newVulnerability);
                updateDashboard();
                hideLoading();
            }, 1500);
        });

        function viewDetails(id) {
            alert(`Viewing details for vulnerability ${id}`);
        }

        function takeAction(id) {
            const vuln = vulnerabilities.find(v => v.id === id);
            if (vuln) {
                vuln.status = vuln.status === 'Resolved' ? 'Unresolved' : 'Resolved';
                updateDashboard();
            }
        }

        document.getElementById('search').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const severityFilter = document.getElementById('severityFilter').value;
            
            const filtered = mockVulnerabilities.filter(v => {
                const matchesSearch = v.name.toLowerCase().includes(searchTerm);
                const matchesSeverity = !severityFilter || v.severity === severityFilter;
                return matchesSearch && matchesSeverity;
            });
            
            vulnerabilities = filtered;
            updateDashboard();
        });

        document.getElementById('severityFilter').addEventListener('change', (e) => {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const severityFilter = e.target.value;
            
            const filtered = mockVulnerabilities.filter(v => {
                const matchesSearch = v.name.toLowerCase().includes(searchTerm);
                const matchesSeverity = !severityFilter || v.severity === severityFilter;
                return matchesSearch && matchesSeverity;
            });
            
            vulnerabilities = filtered;
            updateDashboard();
        });
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>